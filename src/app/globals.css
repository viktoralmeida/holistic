@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile-optimized hero background image positioning */
.hero-bg-image {
  object-position: center 60%;
}

@media (min-width: 768px) {
  .hero-bg-image {
    object-position: center 70%;
  }
}

/* Suppress CSS warnings for vendor prefixes */
@supports not (-webkit-text-size-adjust: none) {
  /* Fallback for browsers that don't support -webkit-text-size-adjust */
}

@supports not (-moz-column-gap: 0) {
  /* Fallback for browsers that don't support -moz-column-gap */
}

@supports not (-moz-osx-font-smoothing: auto) {
  /* Fallback for browsers that don't support -moz-osx-font-smoothing */
}

/* Custom scrollbar styles for modern slider */
@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--muted-foreground)) transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: hsl(var(--muted-foreground));
    border-radius: 3px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: hsl(var(--foreground));
  }
  
  /* Optimized hover zoom styles */
  .hover-zoom-container {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
  
  .hover-zoom-image {
    transform: translateZ(0);
    backface-visibility: hidden;
    will-change: transform;
  }

  /* Smart Background Banner System */
  .banner-smart-bg {
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
    transition: background-position 0.3s ease-out;
  }

  /* Mobile devices - Use contain to show full image */
  @media (max-width: 640px) {
    .banner-smart-bg {
      background-size: contain;
      background-position: center center;
    }
  }

  /* Small mobile devices - Ensure full image visibility */
  @media (max-width: 480px) {
    .banner-smart-bg {
      background-size: contain;
      background-position: center center;
    }
  }

  /* Tablet portrait - Balanced approach */
  @media (min-width: 641px) and (max-width: 768px) {
    .banner-smart-bg {
      background-size: cover;
      background-position: center 20%;
    }
  }

  /* Tablet landscape and small desktop */
  @media (min-width: 769px) and (max-width: 1024px) {
    .banner-smart-bg {
      background-size: cover;
      background-position: center 15%;
    }
  }

  /* Desktop */
  @media (min-width: 1025px) and (max-width: 1440px) {
    .banner-smart-bg {
      background-size: cover;
      background-position: center 12%;
    }
  }

  /* Large desktop */
  @media (min-width: 1441px) {
    .banner-smart-bg {
      background-size: cover;
      background-position: center 8%;
    }
  }

  /* Landscape orientation adjustments */
  @media (orientation: landscape) and (max-height: 600px) {
    .banner-smart-bg {
      background-size: cover;
      background-position: center 5% !important;
    }
  }


  /* Ensure smooth scrolling and prevent layout shifts */
  html {
    scroll-behavior: smooth;
  }

  /* Optimize for mobile browsers */
  @media (max-width: 768px) {
    .fixed-bg-optimized {
      -webkit-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0);
    }
  }
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222.2 84% 4.9%;
    --muted: 210 40% 96%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96%;
    --accent-foreground: 222.2 84% 4.9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 84% 4.9%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 94.1%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Custom scrollbar utilities */
.scrollbar-hide {
  -ms-overflow-style: none;  /* Internet Explorer 10+ */
  scrollbar-width: none;  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Safari and Chrome */
}

/* Production-Level Performance Optimizations */
/* Reduce backdrop blur intensity for better mobile performance */
@media (max-width: 768px) {
  .backdrop-blur-md {
    backdrop-filter: blur(4px) !important; /* Reduced from 12px */
  }
  
  .backdrop-blur-sm {
    backdrop-filter: blur(2px) !important; /* Reduced from 4px */
  }
  
  /* Optimize shadow complexity on mobile */
  .shadow-2xl {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important; /* Simplified */
  }
  
  .shadow-3xl {
    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2) !important; /* Simplified */
  }
  
  /* Reduce animation complexity on mobile */
  .animate-pulse {
    animation-duration: 2s !important; /* Slower, less CPU intensive */
  }
  
  /* Optimize hover effects for touch devices */
  .hover\:scale-105:hover {
    transform: scale(1.02) !important; /* Reduced scale for better performance */
  }
  
  /* Reduce transform complexity */
  .hover\:scale-110:hover {
    transform: scale(1.05) !important; /* Reduced scale */
  }
}

/* Firefox Mobile Performance Optimizations */
@supports (-moz-appearance: none) {
  /* Disable parallax effects on Firefox mobile for better performance */
  @media (max-width: 768px) {
    .firefox-mobile-fallback {
      position: absolute !important;
      background-attachment: scroll !important;
    }
    
    .firefox-mobile-hidden {
      display: none !important;
    }
    
    /* Further reduce backdrop blur on Firefox mobile */
    .backdrop-blur-md {
      backdrop-filter: blur(2px) !important;
    }
    
    .backdrop-blur-sm {
      backdrop-filter: blur(1px) !important;
    }
  }
}

/* Additional performance optimizations for mobile browsers */
@media (max-width: 768px) {
  /* Reduce compositing layers on mobile */
  .firefox-mobile-fallback {
    will-change: auto;
    transform: translateZ(0);
    backface-visibility: hidden;
  }
  
  /* Optimize image rendering on mobile */
  img {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
  
  /* Firefox-specific mobile optimizations */
  @supports (-moz-appearance: none) {
    /* Disable hardware acceleration for problematic elements */
    .firefox-mobile-fallback {
      transform: none !important;
      will-change: auto !important;
    }
    
    /* Reduce blur effects on Firefox mobile */
    .blur-sm {
      filter: none !important;
    }
    
    /* Simplify backdrop blur on Firefox mobile */
    .backdrop-blur-sm {
      backdrop-filter: none !important;
    }
  }
  
  /* JavaScript-detected Firefox mobile optimizations */
  .firefox-mobile .firefox-mobile-fallback {
    position: absolute !important;
    background-attachment: scroll !important;
    transform: none !important;
    will-change: auto !important;
  }
  
  .firefox-mobile .firefox-mobile-hidden {
    display: none !important;
  }
  
  .firefox-mobile .blur-sm {
    filter: none !important;
  }
  
  .firefox-mobile .backdrop-blur-sm {
    backdrop-filter: none !important;
  }
}

/* Advanced Performance Optimizations */
/* Reduce GPU layer creation on mobile */
@media (max-width: 768px) {
  /* Optimize will-change property usage */
  .hover-zoom-container {
    will-change: auto;
  }
  
  .hover-zoom-image {
    will-change: auto;
  }
  
  /* Reduce transform complexity for better performance */
  .group:hover .group-hover\:scale-110 {
    transform: scale(1.05) !important; /* Reduced from 1.1 */
  }
  
  /* Optimize gradient rendering */
  .bg-gradient-to-br {
    background-image: linear-gradient(135deg, var(--tw-gradient-stops)) !important;
  }
  
  /* Reduce border complexity */
  .border-white\/30 {
    border-color: rgba(255, 255, 255, 0.2) !important; /* Simplified opacity */
  }
  
  .border-white\/40 {
    border-color: rgba(255, 255, 255, 0.3) !important; /* Simplified opacity */
  }
}

/* Performance optimizations for low-end devices */
@media (max-width: 480px) {
  /* Further reduce effects on very small screens */
  .backdrop-blur-md {
    backdrop-filter: blur(1px) !important;
  }
  
  .shadow-2xl, .shadow-3xl {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
  }
  
  /* Disable complex animations on very small screens */
  .animate-pulse {
    animation: none !important;
  }
  
  /* Keep Booksy animation working on small screens */
  .booksy-animated-text {
    animation: 
      booksy-pulse 2s ease-in-out infinite,
      booksy-glow 3s ease-in-out infinite !important;
  }
  
  /* Simplify hover effects */
  .hover\:scale-105:hover {
    transform: none !important;
  }
}

/* Low-end device optimizations */
.low-end-device {
  /* Reduce all animation durations */
  * {
    animation-duration: 0.2s !important;
    transition-duration: 0.2s !important;
  }
  
  /* Keep Booksy animation working on low-end devices */
  .booksy-animated-text {
    animation: 
      booksy-pulse 2s ease-in-out infinite,
      booksy-glow 3s ease-in-out infinite !important;
  }
  
  /* Simplify backdrop blur effects */
  .backdrop-blur-md {
    backdrop-filter: blur(2px) !important;
  }
  
  .backdrop-blur-sm {
    backdrop-filter: blur(1px) !important;
  }
  
  /* Reduce shadow complexity */
  .shadow-2xl, .shadow-3xl {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1) !important;
  }
  
  /* Simplify hover transforms */
  .hover\:scale-105:hover {
    transform: scale(1.01) !important;
  }
  
  .hover\:scale-110:hover {
    transform: scale(1.02) !important;
  }
  
  /* Reduce gradient complexity */
  .bg-gradient-to-br {
    background: linear-gradient(135deg, var(--tw-gradient-stops)) !important;
  }
}

/* Custom animation for Booksy text */
@keyframes booksy-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.05);
  }
}

@keyframes booksy-glow {
  0%, 100% {
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
  }
  50% {
    text-shadow: 0 0 15px rgba(255, 255, 255, 0.6), 0 0 25px rgba(255, 255, 255, 0.3);
  }
}

/* Animated text for Booksy integration */
.booksy-animated-text {
  display: inline-block;
  animation: 
    booksy-pulse 2s ease-in-out infinite,
    booksy-glow 3s ease-in-out infinite;
}

/* Pause animation on hover */
.booksy-animated-text:hover {
  animation-play-state: paused;
}

/* Floating bubble animations */
@keyframes float-slow {
  0%, 100% {
    transform: translateY(0px) translateX(0px);
  }
  25% {
    transform: translateY(-10px) translateX(5px);
  }
  50% {
    transform: translateY(-5px) translateX(-3px);
  }
  75% {
    transform: translateY(-15px) translateX(2px);
  }
}

@keyframes float-medium {
  0%, 100% {
    transform: translateY(0px) translateX(0px);
  }
  33% {
    transform: translateY(-8px) translateX(-4px);
  }
  66% {
    transform: translateY(-12px) translateX(6px);
  }
}

@keyframes float-fast {
  0%, 100% {
    transform: translateY(0px) translateX(0px);
  }
  50% {
    transform: translateY(-6px) translateX(3px);
  }
}

/* Apply floating animations */
.animate-float-slow {
  animation: float-slow 6s ease-in-out infinite;
  will-change: transform;
}

.animate-float-medium {
  animation: float-medium 4s ease-in-out infinite;
  will-change: transform;
}

.animate-float-fast {
  animation: float-fast 3s ease-in-out infinite;
  will-change: transform;
}

/* Performance optimizations for floating animations */
@media (max-width: 768px) {
  .animate-float-slow {
    animation: float-slow 8s ease-in-out infinite; /* Slower on mobile */
  }
  
  .animate-float-medium {
    animation: float-medium 6s ease-in-out infinite; /* Slower on mobile */
  }
  
  .animate-float-fast {
    animation: float-fast 4s ease-in-out infinite; /* Slower on mobile */
  }
}

/* Disable floating animations on low-end devices */
.low-end-device .animate-float-slow,
.low-end-device .animate-float-medium,
.low-end-device .animate-float-fast {
  animation: none !important;
}
